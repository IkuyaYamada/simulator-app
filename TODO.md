# TODO List / できたことリスト

## ✅ 完了済み
- **データベーススキーマ**: init.sqlで作成済み
- **株価情報表示**: ティッカーシンボル検索でリアルタイム株価表示
- **シミュレーション作成機能**: 銘柄選択後のシミュレーション開始
- **シミュレーション一覧ページ**: 作成済みシミュレーションの表示
- **シミュレーション詳細ページ**: 個別シミュレーションの詳細情報表示
- **API実装**: POST/GET /api/simulations エンドポイント
- **チェックポイントシステム**: 手動・自動チェックポイント作成機能
- **投資仮説管理**: ポジティブ要因・リスク要因の入力・管理
- **JST変換**: 日時表示の日本標準時対応
- **シミュレーション詳細画面改善**: 高値・安値・終値の3線グラフ表示
- **チェックポイント可視化**: グラフ上にチェックポイント縦線表示
- **インタラクティブチャート**: チェックポイントクリックでスクロール機能


## 🚧 次の実装予定
## 🎨 シミュレーション詳細画面の改善
- **高値・安値・終値の3線グラフ表示** - Rechartsを使用した詳細な価格データの可視化
- **チェックポイント縦線表示** - グラフ上に破線・ピンアイコン付きチェックポイント表示
- **インタラクティブチェックポイント** - 線グラフのチェックポイントでクリック描画・スクロール機能
- **期間フィルタリング** - シミュレーション開始の-30日から+3日間の表示範囲

###  **売買条件の自動監視** 
- **価格条件監視**: 株価が指定価格を超えた時の通知・チェック
- **期間条件監視**: 指定期間経過時の確認
- **リスク条件監視**: ストップロス・利確価格の監視
- **自動条件トリガー**: 条件満たし時の自動チェックポイント作成

###  **PnL記録システム** 
- **自動損益計算**: 売買価格と現在価格の比較
- **PnL履歴レコード**: シミュレーションごとの損益追跡  
- **日別PnL集計**: 毎日またはチェックポイントでの損益計算
- **損益率表示**: パーセンテージ表記と一緒のPnL表示

---

## 🎯 次のステップ - 売買条件監視システム実装

###  **売買条件の自動監視** - 「今ここ」のフェーズ
#### API実装（新規作成必要）
- **POST /api/conditions**: 新しい売買条件の作成
- **GET /api/conditions/:simulationId**: シミュレーションの売買条件一覧取得
- **PUT /api/conditions/:id**: 条件の更新・状態変更

#### データ監視機能
- **価格条件トリガー**: 指定価格超え・下回り時の自動実行
- **期間ベース監視**: 指定日数経過時の自動チェック実行
- **自動チェックポイント作成**: 条件達成時のチェックポイント自動作成

#### フロントエンド実装
- **売買条件設定フォーム**: 購入・売却条件のコンポーネント追加  
- **条件状況表示**: シミュレーション詳細でのアクティブ条件表示
- **リアルタイム状態監視**: 条件合格・期間満了の通知表示

#### **シミュレーション詳細画面の組み立て強化** 📊
- **NewSimulationModal連携**: 既存モーダル実装機能を詳細画面に活用
  - 銘柄基本情報の表示（companyName, tickerSymbol, industry）
  - 現在価格・変動額・変動率・取引量の詳細表示
  - 高値・安値・終値3線チャートの応用・拡張
  - 通貨別表示ロジック（JPY/USD）の再活用
- **設定データ継承**: 初期資本・投資期間設定の可視化・編集機能
- **株価予測グラフ**: NewSimulationModalのRechartsコンポーネント活用
- **投資フォーム統合**: モーダル内シミュレーション設定UIのコンポーネント化
- **リアルタイム情報**: Stock Fetch ロジック・State管理の詳細画面への展開

#### データ監視フロー（拡張）
```
売買条件設定 → Condition テーブルへ保存
   ↓ 価格・期間の継続監視
条件属性の確認実行 → 自動チェックポイント作成
   ↓
PnL記録の自動作成 → 損益入力・計算
```

## ✅ 修正完了した問題
- **JST時間表示**: 日時表示が日本標準時（JST）に変換・表示
- **システム初期自動チェックポイント**: シミュレーション開始時にチェックポイントゼロ自動作成
- **チェックポイント表示同期**: シミュレーション詳細でチェックポイント一覧正確表示
- **3線グラフ表示**: 高値・安値・終値をスムーズに描画する接続（connectNulls対応）
